doctype html
head
  meta(charset='UTF-8')
  meta(name='viewport' content='width=device-width, initial-scale=1.0')
  title Document
  link(rel='stylesheet' href='/css/manager.css')
  nav.navbar.navbar-expand-lg.bg-body-tertiary
      .container-fluid
        a.navbar-brand(href='#') FORMS
        button.navbar-toggler(type='button' data-bs-toggle='collapse' data-bs-target='#navbarNav' aria-controls='navbarNav' aria-expanded='false' aria-label='Toggle navigation')
          span.navbar-toggler-icon
        #navbarNav.collapse.navbar-collapse
          ul.navbar-nav.ms-auto
            li.nav-item
              a.nav-link(href='/index') Home
            li.nav-item
              a.nav-link(href='/register') register
            li.nav-item
              a.nav-link(href='/login') login
            li.nav-item
              a.nav-link(href='/stock') stock
              
header#topbar
main.container
  h1 Admin Dashboard
  section#kpis.kpi-grid
  section.grid
  a.tile(href='/stock')  Add / Update Stock
  a.tile(href='/sales-entry')  Sales Entry
  a.tile(href='sales-report.html') Sales Report
  a.tile(href='user-management.html')  User Management

script(src='assets/js/data.js')
script(src='/js/auth.js')
script(src='/js/ui.js')
script(src='/js/manager.js')
script.
  requireAuth(); renderTopbar('Dashboard');
  const { products, sales } = db();
  const totalProducts = products.length;
  const totalStock = products.reduce((s,p)=>s+(p.quantity||0),0);
  const revenue = sales.reduce((s,sl)=>s+Number(sl.total||0),0);
  const k = document.getElementById('kpis');
  k.innerHTML = `
  <div class="kpi"><div class="kpi-num">${totalProducts}</div><div class="kpi-label">Products</div></div>
  <div class="kpi"><div class="kpi-num">${totalStock}</div><div class="kpi-label">Total Units in Stock</div></div>
  <div class="kpi"><div class="kpi-num">UGX ${revenue.toLocaleString()}</div><div class="kpi-label">Revenue (All-time)</div></div>
  `;
footer
  .container
    p &copy; 2025 Mayondo Wood &amp; Furniture Ltd
